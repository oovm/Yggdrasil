class entry Program {
    statements:Statement
}

union Statement {
    | ^DefineStatement EOS?
    | ^EmptyStatement
}

class EmptyStatement {
    EOS
}

class MacroCalls {
    _MacroCall+
}
class _MacroCall {
    | '#' macros:Macro
    | '#' '[' macros:Macro ']'
}

class Macro {
    Identifier Arguments?
}

class Arguments {
    '(' ArgumentValue ')'
}

union ArgumentValue {

}

class DefineStatement {
    MacroCalls Define Modifiers symbol:Identifier Arguments? Typing? '{' body:Choice '}'
}

class Define -> string {
    "def" | "class" | "union" | "structure" | "struct" | "enumerate" | "enum"
}

class Typing {
    '->' Identifier
}

union Choice {
    '|'?
}



class Modifiers {
    _Modifier+
}
class _Modifier {
    Identifier !('{'|'('|':'|'->'|';')
}
class Identifier {
    (XID_START | '_') XID_CONTINUE*
}

class EOS -> char {
    ';'
}